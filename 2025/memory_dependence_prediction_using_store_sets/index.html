<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content='3. motivation 3.1 no speculation 所有load 指令等到所有先前的store 指令都发出后才能被允许发出
3.2 naive speculation 在寄存器依赖项准备就绪时就执行load,而与内存依赖项无关 。
'><title>Memory_dependence_prediction_using_store_sets</title>
<link rel=canonical href=https://VastCircle.github.io/2025/memory_dependence_prediction_using_store_sets/><link rel=stylesheet href=/scss/style.min.46208cabd58e8bcef0cfb7d7ea6b561adcca3b91dd1fc6657493a44f03c5db75.css><meta property='og:title' content='Memory_dependence_prediction_using_store_sets'><meta property='og:description' content='3. motivation 3.1 no speculation 所有load 指令等到所有先前的store 指令都发出后才能被允许发出
3.2 naive speculation 在寄存器依赖项准备就绪时就执行load,而与内存依赖项无关 。
'><meta property='og:url' content='https://VastCircle.github.io/2025/memory_dependence_prediction_using_store_sets/'><meta property='og:site_name' content="VastCircle's blog"><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content><meta property='article:published_time' content='2025-02-12T16:24:37+08:00'><meta property='article:modified_time' content='2025-02-12T16:24:37+08:00'><meta name=twitter:title content="Memory_dependence_prediction_using_store_sets"><meta name=twitter:description content="3. motivation 3.1 no speculation 所有load 指令等到所有先前的store 指令都发出后才能被允许发出
3.2 naive speculation 在寄存器依赖项准备就绪时就执行load,而与内存依赖项无关 。
"><style>:root{--article-font-family:"Noto Serif SC", var(--base-font-family)}</style><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@300;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex
<!--
extended
-->
on-phone--column extended"><div id=article-toolbar><a href=https://VastCircle.github.io/ class=back-home><svg class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg>
<span>Back</span></a></div><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header class=site-info><figure class=site-avatar><a href=/><img src=/img/avatar_hu9516569771622178000.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>🍥</span></figure><h1 class=site-name><a href=/>VastCircle's blog</a></h1><h2 class=site-description>To shine , not to be illuminated</h2><ol class=social-menu><li><a href=https://github.com/VastCircle target=_blank title=GitHub><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://twitter.com target=_blank title=Twitter><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol></header><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>friends</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/>论文阅读</a></header><h2 class=article-title><a href=/2025/memory_dependence_prediction_using_store_sets/>Memory_dependence_prediction_using_store_sets</a></h2><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Feb 12, 2025</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-words>3588字</time></div></footer></div></header><section class=article-content><h2 id=3-motivation>3. motivation</h2><h3 id=31-no-speculation>3.1 no speculation</h3><p>所有load 指令等到所有先前的store 指令都发出后才能被允许发出</p><h3 id=32-naive-speculation>3.2 naive speculation</h3><p>在寄存器依赖项准备就绪时就执行load,而与内存依赖项无关 。</p><blockquote><p>这样会涉及到流水线的冲刷和load及其依赖指令的重新执行</p></blockquote><p><strong>memory trap penalty</strong>: the number of cycles between the first time a load is fetched to the next time the load is fetched after a memory-order violation has been detected.内存陷阱惩罚表明未获取有用指令的平均周期数。</p><blockquote><p>load-> 发现内存顺序错误 -> 重新load , 这一段时间 ， 无效实现</p></blockquote><h3 id=33-perfect-memory-dependence-prediction>3.3 perfect memory dependence prediction</h3><p>完美依赖性预测</p><p><figure class=gallery-image style=flex-grow:319;flex-basis:767px><a href=/2025/memory_dependence_prediction_using_store_sets/image-20250212200519070.png data-size=1017x318><img src=/2025/memory_dependence_prediction_using_store_sets/image-20250212200519070.png width=1017 height=318 srcset="/2025/memory_dependence_prediction_using_store_sets/image-20250212200519070_hu16955068874169117617.png 480w, /2025/memory_dependence_prediction_using_store_sets/image-20250212200519070_hu15539618881675662814.png 1024w" loading=lazy></a></figure></p><h2 id=5--store-sets>5 . Store sets</h2><p>store sets 的概念基于两个基本假设。首先，内存顺序冲突的历史行为可以很好地预测未来的内存依赖关系。第二个是预测加载的依赖关系非常重要，其中一个加载依赖于多个存储或多个加载依赖于同一存储。</p><h3 id=51-concept>5.1 concept</h3><p>我们将正在运行的程序中的每个 load 指令定义为具有一组关联的 store 指令，称为其 store set。负载的存储集由它曾经依赖的所有存储（由其 PC 标识）组成。</p><p>当程序开始执行时，所有加载都有空的 store set，并且处理器允许对 store 周围的 load 进行naive speculation。当 load 和 store 以错误的顺序执行，导致违规时，store PC 将被添加到 load 的 store set，例如，set A。如果另一个 store 与相同的负载冲突，则该 store PC 也会添加到设置 A。当处理器下次看到该 load 时，它要求该 load 在store set A 中最近获取的任何存储之后执行。当获取 load 时，processor 将确定 load 的 store set 中的哪些 store 是最近获取的但尚未发出的，并创建对这些 store 的依赖关系。永远不会导致 memory-order 冲突的加载将没有强加的内存依赖项，并且会尽快执行。导致内存顺序冲突的 load 将仅依赖于它们过去所依赖的那些先前的 store。如果存储集 A 中的一个存储也导致另一个加载的内存顺序冲突，则它也将成为该加载的存储集的一部分。负载和存储由其 PC 标识。</p><p><figure class=gallery-image style=flex-grow:167;flex-basis:402px><a href=/2025/memory_dependence_prediction_using_store_sets/image-20250212203145797.png data-size=384x229><img src=/2025/memory_dependence_prediction_using_store_sets/image-20250212203145797.png width=384 height=229 srcset="/2025/memory_dependence_prediction_using_store_sets/image-20250212203145797_hu17788034722826941629.png 480w, /2025/memory_dependence_prediction_using_store_sets/image-20250212203145797_hu6988105311963708496.png 1024w" loading=lazy></a></figure></p><p>这种多个加载依赖于同一存储的情况相当常见，当一个值有一个写入器和多个读取器时，就会发生这种情况. 依赖于多个 store 的 One load 在某种程度上更加模糊。发生这种情况的三种情况是：1） 负载可能取决于来自不同路径的 store，例如，if （expr） then x = a;否则 x = b;. . . . .c = x;2） 加载可以依赖于对数据字中打包的结构字段的多个存储，这些字段都一起读取，例如，写入颜色结构的红色、绿色和蓝色分量;3） 假设内存先写后写风险被视为依赖关系，则负载可能依赖于对同一位置的一系列存储;例如，多次泄漏到同一位置。</p><p>3种配置</p><ol><li>其中程序中的每个加载都有自己的存储集，并且该存储集可以包含任意数量的存储，但一个存储只能驻留在一个存储集中,当存储导致内存顺序冲突时，它将从它所在的任何存储集中消除，并放置在最后与之冲突的负载的存储集中（禁止多个load依赖于同一个store)。</li></ol><ol start=2><li>将 store 集的大小限制为 1，允许程序中的每个加载最多指定一个 store 依赖项,这禁止一个load依赖于多个store</li><li>没有前面的限制 ，infinite</li></ol><p><figure class=gallery-image style=flex-grow:302;flex-basis:725px><a href=/2025/memory_dependence_prediction_using_store_sets/image-20250212204915027.png data-size=1125x372><img src=/2025/memory_dependence_prediction_using_store_sets/image-20250212204915027.png width=1125 height=372 srcset="/2025/memory_dependence_prediction_using_store_sets/image-20250212204915027_hu7551146655904608235.png 480w, /2025/memory_dependence_prediction_using_store_sets/image-20250212204915027_hu3072557715467479144.png 1024w" loading=lazy></a></figure></p><h3 id=52-performance>5.2 performance</h3><p>四种load : not predicted , correct predictions , false dependencies ,memory order violations</p><blockquote><p>因为是基于store 的pc进行预测的 ， 对load来说还是可能出现 false dependencies (错误依赖，本身没有依赖的但是预测为依赖)，violation(内存顺序违规，有内存依赖但是没有预测出来)</p></blockquote><p><figure class=gallery-image style=flex-grow:242;flex-basis:581px><a href=/2025/memory_dependence_prediction_using_store_sets/image-20250212210408090.png data-size=1115x460><img src=/2025/memory_dependence_prediction_using_store_sets/image-20250212210408090.png width=1115 height=460 srcset="/2025/memory_dependence_prediction_using_store_sets/image-20250212210408090_hu10155987580812307932.png 480w, /2025/memory_dependence_prediction_using_store_sets/image-20250212210408090_hu4515806209266207182.png 1024w" loading=lazy alt=image-20250212210408090></a><figcaption>image-20250212210408090</figcaption></figure></p><p>将2位饱和计数器和store set memory dependence predictor 耦合 ， 一个两位计数器被附加到load的store set中的每个store . 当发生违规时，counter设置为max, 当load被store set中的store 阻止时，可以比较load和store的地址，如果相同，说明是真的依赖，counter + 1 , 反之 counter - 1 , 仅当 counter 的高位set ， load才会等待store set中的store .</p><p><figure class=gallery-image style=flex-grow:232;flex-basis:559px><a href=/2025/memory_dependence_prediction_using_store_sets/image-20250212211849013.png data-size=1139x489><img src=/2025/memory_dependence_prediction_using_store_sets/image-20250212211849013.png width=1139 height=489 srcset="/2025/memory_dependence_prediction_using_store_sets/image-20250212211849013_hu15426836513319110211.png 480w, /2025/memory_dependence_prediction_using_store_sets/image-20250212211849013_hu5142801816768202280.png 1024w" loading=lazy></a></figure></p><h2 id=6-store-set-implementation>6. store set implementation</h2><p>在硬件实现中，限制store pc 最多存在在一个store set中(为什么说是配置2)， 提出合并store sets的算法，允许依赖于同一store 的两个load 共享一个store</p><p>store sets 允许 load 依赖与多个 store , 需要一种机制延迟 load,直到store set中的所有store 都执行完 。构建这样的机制比较麻烦，因此可以强制store set中的store是按顺序执行的 ，这是通过使得每一个store 依赖于store set 中最后获取的store 实现（?)</p><h3 id=61-components>6.1 components</h3><p>store set identifier table(SSIT) , pc indexed table(PC索引表), using a common tag for each load and the stores in its store set</p><p>Last fatched store table (LFST) , 维护每个store sets 中最近获取的store的动态信息 。信息是store 的 inum , 是一个硬件指针，用来标识每个正在运行的指令的实例。</p><p>最近获取的load 根据pc访问SSIT 获取store set identifier (SSID), 储存集标识符， 如果一个load有有效的SSID,则它具有有效的store set . 它将访问第二个表LFST,获取最近获取的store指令的inum</p><blockquote><p>ssid就是store sets 的id号， pc 通过ssit索引 store set id , 然后再获取最近的一条store指令的 inum</p></blockquote><p>最近获取的store 也会访问SSIT,如果找到有效的SSID,则它属于有效的store sets . 然后，store 需要执行 1） 访问LFST并获取store sets中最近获取的store指令。 新的store 将依赖于它在LFST中找到的store .2) 更新LFST,插入自己的inum , 因为它是现在store sets中最后的store</p><p>当store issues后，会访问LFST,如果仍然引用自身，则使得该条目无效。可以确保load和store只依赖于未issue的store(?) 如果store来自不同的代码路径，并且不是每次执行load时都执行，则只有获取的store将访问 SSIT 并修改 LFST。load将始终依赖于适当的 store，并且 store 永远不会被迫相互load，因为它们在不同的时间执行。</p><blockquote><p>store issue确实无所谓了，代笔地址会在后几个周期就计算出来, 好像不太对</p></blockquote><p><figure class=gallery-image style=flex-grow:250;flex-basis:601px><a href=/2025/memory_dependence_prediction_using_store_sets/image-20250212221551604.png data-size=1005x401><img src=/2025/memory_dependence_prediction_using_store_sets/image-20250212221551604.png width=1005 height=401 srcset="/2025/memory_dependence_prediction_using_store_sets/image-20250212221551604_hu664832010964375401.png 480w, /2025/memory_dependence_prediction_using_store_sets/image-20250212221551604_hu6756899487959684531.png 1024w" loading=lazy></a></figure></p><blockquote><p>在 dispatch的时候访问ssid表， 在store commit 的时候如果发生冲突，会在SSIT中创建store sets</p><p>SSID pc经过 hash 作为 索引 ， SSID 是分配的 ，冲突的load ,store 具有相同的 ssid ,</p><p>在 store 访问 SSIT,如果能够发现有效的SSID , 就会进一步通过SSID去将store 的 inum 写入 LFST</p><p>随后的load 指令因为和store 指令具有相同的SSID,所以可以得到store指令的inum,进而在后续issue的时候就能够得到相应的依赖关系，在依赖的store未issue的时候，就无法issue load</p><p>SSID是lfst的 index</p><p>如果之后load 和另外的store 发生冲突，load有SSID, store 没有，那此时store 直接继承load的SSID ,并且将inum更新为现在的store , 这样的话load ,</p><p>SSIT和LFST的更新应该是在发生冲突的时候</p></blockquote><p>在程序开始时，假设 SSIT 中的所有条目都是无效的。最初，存储和加载指令将访问该表，并且不会获得有效的内存依赖性信息。如果store commit内存顺序冲突，则会在 SSIT 中创建一个store sets 。冲突中涉及的 load 和 store 指令将被分配一个SSID，例如 SSID X。我们在负载的 PC 上选择了 exclusive-or 哈希。SSID X 将被写入 SSIT 中的两个位置;第一个位置将由load PC 编制索引，第二个位置将由store PC 编制索引。下次获取该store PC 时，它将读取由其 PC 索引的 SSIT 条目。由于 SSID 有效，因此它使用该存储集的 SSID 访问 LFST，在那里它没有从存储集 X 中找到有效的最近获取的指令。因此，它不会依赖于其他store。store 继续将自己的 inum 写入 LFST。当随后获取 load 指令时，它访问 SSIT，然后访问 SSID 为 X 的 LFST。LFST 向指令调度器传达 load 取决于它在那里找到的 store 指令。这一次，指令调度器将在 load 和 store 之间施加依赖关系，其方式类似于它施加 register 依赖关系约束的方式。</p><p>如果稍后加载与其他存储冲突，则会通知 SSIT 新的内存顺序冲突。SSID X 被复制到由新load的 PC 编制索引的 SSIT 条目中。现在 SSIT 中有三个指向 SSID X 的条目。下次获取两个存储和负载时，第二个存储将取决于第一个存储，而负载将取决于第二个存储。？ 怎么做到的</p><p>请注意，存储被限制为一次只能位于一个存储集中，以保持 SSIT 和 LFST 的简单性。如果我们允许 SSIT 在每个条目中保存多个 SSID，则一个存储可以是多个存储集的一部分。然后，多个 SSID 必须访问 LFST，从而增加所需的读取端口数量。此外，每个加载将依赖于最多两个存储，从而为需要施加依赖关系的指令调度硬件增加更多的大小和复杂性。</p><h3 id=62-store-set-分配>6.2 store set 分配</h3><p>发生内存顺序冲突时，将在 SSIT 中创建条目。当加载的 SSID 和存储的 SSID 均无效时，将创建一个 SSID 并将其分配给两者。如果加载的 SSID 有效而存储的 SSID 无效，则存储将继承加载的 SSID，并成为加载的存储集的一部分。我们尚未讨论如果store已经拥有有效的 SSID 会发生什么情况。覆盖store的旧 SSID 将有效地从旧store集中删除该store，并将其放入新的store集中。这会产生不良效果，即限制 store 一次只能位于一个 store 集中。为了控制在确定是否用一个有效 SSID 覆盖一个有效 SSID 时所做的决策，我们建立了一些存储集分配规则。</p><h2 id=附录>附录</h2><h3 id=参考文献>参考文献</h3><h3 id=版权信息>版权信息</h3><p>本文原载于 <a class=link href=https://vastcircle.github.io target=_blank rel=noopener>vastcircle.github.io</a>，遵循 CC BY-NC-SA 4.0 协议，复制请保留原文出处。</p></section><footer class=article-footer><section class=article-tags></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-contents--wrapper><h2 class=section-title>Related contents</h2><div class=related-contents><div class="flex article-list--tile"><article><a href=/2025/gaze_into_the_pattern__for_hardware_prefetching/><div class=article-details><h2 class=article-title>Gaze_into_the_Pattern__for_Hardware_Prefetching</h2></div></a></article><article><a href=/2025/constable_improving_performance_and_power__execution/><div class=article-details><h2 class=article-title>Constable_improving_performance_and_power__execution</h2></div></a></article><article><a href=/2025/memory_renaming_fast_early_and_accurate_processing_of_memory_communication/><div class=article-details><h2 class=article-title>Memory_renaming_fast_early_and_accurate_processing_of_memory_communication</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//stack.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{DISQUS&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><script>(function(e,t){var s=document,o="script",n=s.createElement(o),i=s.getElementsByTagName(o)[0];n.src=e,t&&n.addEventListener("load",function(e){t(e)}),i.parentNode.insertBefore(n,i)})("//cdn.bootcss.com/pangu/3.3.0/pangu.min.js",function(){pangu.spacingPage()})</script><section class=copyright>&copy;
2023 -
2025 <a href=https://stack-theme-mod.vercel.app/>vastcircle</a>·<i class="fas fa-bell"></i> <a id=days>0</a>Days<br>共书写了290.2k字·共 82篇文章</br><span><p></section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.2.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a><br><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh target=_blank>© Licensed Under CC BY-NC-SA 4.0</a></section><script>var days,number_of_days,s1="2024-10-06",s1=new Date(s1.replace(/-/g,"/"));s2=new Date,days=s2.getTime()-s1.getTime(),number_of_days=parseInt(days/(1e3*60*60*24)),document.getElementById("days").innerHTML=number_of_days</script></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous></main><aside class="sidebar right-sidebar sticky"><form action=/search/ class="search-form widget"><p><label>Search</label>
<input name=keyword required placeholder="Type something...">
<button title=Search><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg></button></p></form><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#3-motivation>3. motivation</a><ol><li><a href=#31-no-speculation>3.1 no speculation</a></li><li><a href=#32-naive-speculation>3.2 naive speculation</a></li><li><a href=#33-perfect-memory-dependence-prediction>3.3 perfect memory dependence prediction</a></li></ol></li><li><a href=#5--store-sets>5 . Store sets</a><ol><li><a href=#51-concept>5.1 concept</a></li><li><a href=#52-performance>5.2 performance</a></li></ol></li><li><a href=#6-store-set-implementation>6. store set implementation</a><ol><li><a href=#61-components>6.1 components</a></li><li><a href=#62-store-set-分配>6.2 store set 分配</a></li></ol></li><li><a href=#附录>附录</a><ol><li><a href=#参考文献>参考文献</a></li><li><a href=#版权信息>版权信息</a></li></ol></li></ol></nav></div></section><section class="widget categories"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-infinity" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M9.828 9.172a4 4 0 100 5.656A10 10 0 0012 12a10 10 0 012.172-2.828 4 4 0 110 5.656A10 10 0 0112 12 10 10 0 009.828 9.172"/></svg></div><h2 class="widget-title section-title">Categories</h2><div class=widget-categories--list><div class=widget><h3 class=widget-title></h3><div class=widget-body><div class=category-list><div class=category-list-item><a href=https://VastCircle.github.io/categories/a_prime_on_hardware_prefetch/ class=category-list-link>a_prime_on_hardware_prefetch<span class=category-list-count>1</a></span></div><div class=category-list-item><a href=https://VastCircle.github.io/categories/boom/ class=category-list-link>boom<span class=category-list-count>2</a></span></div><div class=category-list-item><a href=https://VastCircle.github.io/categories/boom%E4%BB%A3%E7%A0%81%E9%98%85%E8%AF%BB/ class=category-list-link>boom代码阅读<span class=category-list-count>1</a></span></div><div class=category-list-item><a href=https://VastCircle.github.io/categories/cache/ class=category-list-link>cache<span class=category-list-count>1</a></span></div><div class=category-list-item><a href=https://VastCircle.github.io/categories/chipyard/ class=category-list-link>chipyard<span class=category-list-count>3</a></span></div><div class=category-list-item><a href=https://VastCircle.github.io/categories/chisel/ class=category-list-link>chisel<span class=category-list-count>2</a></span></div><div class=category-list-item><a href=https://VastCircle.github.io/categories/cpu%E5%9F%BA%E7%A1%80/ class=category-list-link>cpu基础<span class=category-list-count>2</a></span></div><div class=category-list-item><a href=https://VastCircle.github.io/categories/gem5/ class=category-list-link>gem5<span class=category-list-count>2</a></span></div><div class=category-list-item><a href=https://VastCircle.github.io/categories/gpgpu%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/ class=category-list-link>gpgpu读书笔记<span class=category-list-count>2</a></span></div><div class=category-list-item><a href=https://VastCircle.github.io/categories/linux/ class=category-list-link>linux<span class=category-list-count>1</a></span></div><div class=category-list-item><a href=https://VastCircle.github.io/categories/riscv/ class=category-list-link>riscv<span class=category-list-count>1</a></span></div><div class=category-list-item><a href=https://VastCircle.github.io/categories/rocket-chip/ class=category-list-link>rocket-chip<span class=category-list-count>2</a></span></div><div class=category-list-item><a href=https://VastCircle.github.io/categories/runahead/ class=category-list-link>runahead<span class=category-list-count>3</a></span></div><div class=category-list-item><a href=https://VastCircle.github.io/categories/%E4%BB%A3%E7%A0%81%E9%98%85%E8%AF%BB/ class=category-list-link>代码阅读<span class=category-list-count>1</a></span></div><div class=category-list-item><a href=https://VastCircle.github.io/categories/%E5%88%86%E6%94%AF%E9%A2%84%E6%B5%8B/ class=category-list-link>分支预测<span class=category-list-count>1</a></span></div><div class=category-list-item><a href=https://VastCircle.github.io/categories/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/ class=category-list-link>博客搭建<span class=category-list-count>1</a></span></div><div class=category-list-item><a href=https://VastCircle.github.io/categories/%E5%A4%84%E7%90%86%E5%99%A8/ class=category-list-link>处理器<span class=category-list-count>1</a></span></div><div class=category-list-item><a href=https://VastCircle.github.io/categories/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/ class=category-list-link>环境搭建<span class=category-list-count>1</a></span></div><div class=category-list-item><a href=https://VastCircle.github.io/categories/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/ class=category-list-link>环境配置<span class=category-list-count>3</a></span></div><div class=category-list-item><a href=https://VastCircle.github.io/categories/%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7/ class=category-list-link>缓存一致性<span class=category-list-count>1</a></span></div><div class=category-list-item><a href=https://VastCircle.github.io/categories/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/ class=category-list-link>论文阅读<span class=category-list-count>13</a></span></div><div class=category-list-item><a href=https://VastCircle.github.io/categories/%E8%AE%BF%E5%AD%98/ class=category-list-link>访存<span class=category-list-count>1</a></span></div><div class=category-list-item><a href=https://VastCircle.github.io/categories/%E8%B6%85%E6%A0%87%E9%87%8F%E5%A4%84%E7%90%86%E5%99%A8/ class=category-list-link>超标量处理器<span class=category-list-count>12</a></span></div><div class=category-list-item><a href=https://VastCircle.github.io/categories/%E9%A6%99%E5%B1%B1/ class=category-list-link>香山<span class=category-list-count>8</a></span></div><div class=category-list-item><a href=https://VastCircle.github.io/categories/%E9%A6%99%E5%B1%B1%E6%BA%90%E4%BB%A3%E7%A0%81/ class=category-list-link>香山源代码<span class=category-list-count>3</a></span></div></div></div></div></div></section><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-infinity" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M9.828 9.172a4 4 0 100 5.656A10 10 0 0012 12a10 10 0 012.172-2.828 4 4 0 110 5.656A10 10 0 0112 12 10 10 0 009.828 9.172"/></svg></div><h2 class="widget-title section-title">Archives</h2><div class=widget-archive--list><div class=archives-year><a href=/archives/#2025><span class=year>2025</span>
<span class=count>35</span></a></div><div class=archives-year><a href=/archives/#2024><span class=year>2024</span>
<span class=count>47</span></a></div></div></section><section class="widget tagCloud"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11 3l9 9a1.5 1.5.0 010 2l-6 6a1.5 1.5.0 01-2 0L3 11V7a4 4 0 014-4h4"/><circle cx="9" cy="9" r="2"/></svg></div><h2 class="widget-title section-title">Tags</h2><div class=tagCloud-tags><a href=/tags/runahead/ class=font_size_6>Runahead
</a><a href=/tags/prefetch/ class=font_size_3>Prefetch
</a><a href=/tags/vector/ class=font_size_3>Vector
</a><a href=/tags/cache/ class=font_size_2>Cache
</a><a href=/tags/chipyard/ class=font_size_2>Chipyard
</a><a href=/tags/diplomacy/ class=font_size_2>Diplomacy
</a><a href=/tags/in-order/ class=font_size_2>In-Order
</a><a href=/tags/rocket-chip/ class=font_size_2>Rocket-Chip
</a><a href=/tags/%E5%88%86%E6%94%AF%E9%A2%84%E6%B5%8B/ class=font_size_2>分支预测
</a><a href=/tags/%E5%AF%84%E5%AD%98%E5%99%A8%E9%87%8D%E5%91%BD%E5%90%8D/ class=font_size_2>寄存器重命名</a></div></section></aside></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>